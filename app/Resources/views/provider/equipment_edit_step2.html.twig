{% extends 'base.html.twig' %}

{% block home_header %}{% endblock %}

{% block body %}
    {% include('provider/user_nav.html.twig') %}
    <section class="users container background-light-grey">
      <div class="row">
          <!-- Left side -->
          <div class="col-md-9">
              <a href="{{ path('dashboard') }}"><img src="/img/logo-small.png" alt=""/></a>            <ul class="steps">
                  <li class="step-1 active-step"><span id="button_1" class="top-menu-button counters"><span class="n-one"></span>Tarif</span></li>
                  <li class="step-2"><span class="counters text-bold"><span class="n-two"></span>Beschreibung</span>
                  </li>
                  <li class="step-3"><span id="button_3" class="{% if (complete) %}top-menu-button{% endif %} counters greyed"><span class="nh-three"></span>Details</span></li>
                  <li class="step-4"><span id="button_4" class="{% if (complete) %}top-menu-button{% endif %} counters greyed"><span class="nh-four"></span>Fertig</span></li>
              </ul>
          </div>
          <!-- Right side -->
          <div class="col-md-3 margin-rwd">
            <div class="support">
              <p class="head">Anbieter Support</p>
              <p class="mail"><a href="mail:support@heysharing.com">support@heysharing.com</a></p>
            </div>
          </div>
      </div>
      <div class="row user-forms">
          <div class="col-md-8">
              <div class="row">
                  <div class="col-xs-12 border-bottom-white form-head">
                      <div class="form-container form-input-border">
                          <div class="row">
                              <div class="col-sm-12">
                                  <span class="number-two number-rwd"></span>

                                  <p class="form-heading">Gib deinem Angebot ein Gesicht!</p>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
            <div class="upload-form">
                  {#
                  <form id="upload-once" method="post" action="{{ path('equipment-image') }}" enctype="multipart/form-data">
                      <span class="btn btn-default btn-file">
                         bild hochladen <input type="file">
                       </span>
                  </form>
                  <p class="text-center what-size">Bildgröße bitte mindestens 1024 x 768px im Querformat</p>
                  #}
                  <form id="upload-main" method="post" action="{{ path('equipment-main-image') }}" enctype="multipart/form-data">
                      <div  id="drop-main">
                          <img class="display-block" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDN0E2NUJEQjZCRjIxMUU1QjFFM0Q5QUE2OUM0Qzk0OCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDN0E2NUJEQzZCRjIxMUU1QjFFM0Q5QUE2OUM0Qzk0OCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkM3QTY1QkQ5NkJGMjExRTVCMUUzRDlBQTY5QzRDOTQ4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkM3QTY1QkRBNkJGMjExRTVCMUUzRDlBQTY5QzRDOTQ4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+iW8uSwAAA/ZJREFUeNrMmVtIVkEQgI9dtZtpJUGSVEZ2pSjLLqIkQkJE2E3QKIqwsofqIaIIJAgkkC5Q0EtKRCARYfYUFGkXq4cQTS2SLDOLErOLaab+zeKcOA6zp909//l14IP+4+7snGl2Z3ZOmOVNwoEkIBVYCMwBpgJjgeHAT+Az0ADUAhXID2sQZDVQhIsHNOkCbgIbgGGhMDYNeGRgqIw6IAsI88NY8V9eEkRjKeXAXFVjVN4wHbiChnPSDTzFhUXcNmIs92FsxwEJwBogGZ9x8gvIA4q9eng/0CPxzksgF5iooS8C2AZUuni90Eu4HJMobQFygrCJ0jGmuTUum+jfJ1F2DYgM4l4ZBRRgKNG1LuooSmZCQig95OOptBFjmhq+S2XyJKCZMXhHCI5T4awOsnaHyqlSxLzt0RAmLZFwesn6lW4bM5GJrRKDhVcCVcA7YIvB/FOM47bLBpeRga0YLjqyBGh36OhB7+nICKCG2PKKO03mMV7eq7lYPBZHASYukzR1pTB6NtNBp8mA93gcqcoU4LVLwmjHKlBHyomOMjqAnhjHNZSPAZ4o1BfCEbEaejPJfFEuRDtDgx5xcRrJ4ZZGYVStkZyE7jYyP1OW/V5oFFtXDSq6uxqhd53MPW/hjlxABj5UVJgPZDNhZv3n2Vp8WRV5QH7/s/UOeZsDCsqigD+SzUY9u1yySRMViyrnnGbb07RObjKoxbsx3mqYcZ+ADOALea5Sxb0lv2PsfzSSt0lRNPogGtvm3CCMR6fj82V4goiEc0HjxkT1jbYw3TofJmsW9SPJM5nRFt7QwzX0xzD6IkTK/EYGTtBQ2qmZMHoRVRnPzO8UcfWV/CHWGjoyjfxutTcDDfaEIWQ0raUbbKOrmUbMUJFV5Heds/4NkHJysoeF3DaijgiHfiC6cpw7us0gwfhtdBpTEw2I8UtkQI2H3kOwjL5B9FRwDcWArKIaBKPnM3fF3dxA2lh8o5kIbGkh+yPKQMc9pkEUwQ3MYLx01mDBrdjLEwXVEYP5uYwdh90m3GaC3yRMRL08zmDeCqZpU8+UCgNkBqZ156ROrIH9ltnMxbhHtRbKktyo1/tosGg9fGTWzddRUsgoEG99wgr+J4edTDtMUIo5RCsbFUvueM+wNvYqs5gGkc19vOVri0gu5yRK+9ATaQaeX2r195+7JbpLZcebjoiU3uVyu27CjJqNsRntyKaR2KLYBJyx+j9vBFwcUYBtsaDIYuC55d+HIlEer/NjhwsP5DHdKC+I4/WkafzqiLhY7gEeezC2HrNlpOlm8yLx2JtIBRYBM5nuUS9enmuxqSg6TFVeFg3zIYTExdj+TPfd6v8U/TuYi/wVYAA4ZEcE2lLOywAAAABJRU5ErkJggg=="/>
                          <a>Hauptbild hochladen</a>
                          <input type="file" name="upl"/>
                      </div>
                      <ul id="img-list-main">
                            {% if mainImage %}
                                <li class="thumb">
                                    <a href="{{ mainImage.image.urlPath(image_url_prefix) }}" title="öffnen" target="_blank"><img src="{{ mainImage.image.urlPath(image_url_prefix) }}" alt="öffnen"/></a>
                                    <br/>
                                    <a class="remove" href="#" data-id="{{ mainImage.image.id }}" data-main="true" title="löschen"><img src="/img/icons/delete.png" alt="löschen" /></a>
                                </li>
                            {% endif %}
                      </ul>
                  </form>
                  <p class="how-many">Querformat / min. 750 px Breite / max. {{ megabytes }} MB / JPG oder PNG / Keine Werbefotos</p>
                  <a href="{{ path('tutorial-photo') }}" target="_blank"><span class="tutorial">tutorial</span></a>                  
                  {% if mainImageValidation %}
                        <br />
                      <div class="err-msg"><ul><li>{{ mainImageValidation }}</li></ul></div>
                  {% endif %}                  
            </div>
            <div class="upload-form">
                  <form id="upload" method="post" action="{{ path('equipment-image', { 'eid': id }) }}" enctype="multipart/form-data" >
                      <div id="drop">
                          <img class="display-block" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDN0E2NUJEQjZCRjIxMUU1QjFFM0Q5QUE2OUM0Qzk0OCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDN0E2NUJEQzZCRjIxMUU1QjFFM0Q5QUE2OUM0Qzk0OCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkM3QTY1QkQ5NkJGMjExRTVCMUUzRDlBQTY5QzRDOTQ4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkM3QTY1QkRBNkJGMjExRTVCMUUzRDlBQTY5QzRDOTQ4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+iW8uSwAAA/ZJREFUeNrMmVtIVkEQgI9dtZtpJUGSVEZ2pSjLLqIkQkJE2E3QKIqwsofqIaIIJAgkkC5Q0EtKRCARYfYUFGkXq4cQTS2SLDOLErOLaab+zeKcOA6zp909//l14IP+4+7snGl2Z3ZOmOVNwoEkIBVYCMwBpgJjgeHAT+Az0ADUAhXID2sQZDVQhIsHNOkCbgIbgGGhMDYNeGRgqIw6IAsI88NY8V9eEkRjKeXAXFVjVN4wHbiChnPSDTzFhUXcNmIs92FsxwEJwBogGZ9x8gvIA4q9eng/0CPxzksgF5iooS8C2AZUuni90Eu4HJMobQFygrCJ0jGmuTUum+jfJ1F2DYgM4l4ZBRRgKNG1LuooSmZCQig95OOptBFjmhq+S2XyJKCZMXhHCI5T4awOsnaHyqlSxLzt0RAmLZFwesn6lW4bM5GJrRKDhVcCVcA7YIvB/FOM47bLBpeRga0YLjqyBGh36OhB7+nICKCG2PKKO03mMV7eq7lYPBZHASYukzR1pTB6NtNBp8mA93gcqcoU4LVLwmjHKlBHyomOMjqAnhjHNZSPAZ4o1BfCEbEaejPJfFEuRDtDgx5xcRrJ4ZZGYVStkZyE7jYyP1OW/V5oFFtXDSq6uxqhd53MPW/hjlxABj5UVJgPZDNhZv3n2Vp8WRV5QH7/s/UOeZsDCsqigD+SzUY9u1yySRMViyrnnGbb07RObjKoxbsx3mqYcZ+ADOALea5Sxb0lv2PsfzSSt0lRNPogGtvm3CCMR6fj82V4goiEc0HjxkT1jbYw3TofJmsW9SPJM5nRFt7QwzX0xzD6IkTK/EYGTtBQ2qmZMHoRVRnPzO8UcfWV/CHWGjoyjfxutTcDDfaEIWQ0raUbbKOrmUbMUJFV5Heds/4NkHJysoeF3DaijgiHfiC6cpw7us0gwfhtdBpTEw2I8UtkQI2H3kOwjL5B9FRwDcWArKIaBKPnM3fF3dxA2lh8o5kIbGkh+yPKQMc9pkEUwQ3MYLx01mDBrdjLEwXVEYP5uYwdh90m3GaC3yRMRL08zmDeCqZpU8+UCgNkBqZ156ROrIH9ltnMxbhHtRbKktyo1/tosGg9fGTWzddRUsgoEG99wgr+J4edTDtMUIo5RCsbFUvueM+wNvYqs5gGkc19vOVri0gu5yRK+9ATaQaeX2r195+7JbpLZcebjoiU3uVyu27CjJqNsRntyKaR2KLYBJyx+j9vBFwcUYBtsaDIYuC55d+HIlEer/NjhwsP5DHdKC+I4/WkafzqiLhY7gEeezC2HrNlpOlm8yLx2JtIBRYBM5nuUS9enmuxqSg6TFVeFg3zIYTExdj+TPfd6v8U/TuYi/wVYAA4ZEcE2lLOywAAAABJRU5ErkJggg=="/>
                          <a>Weitere&nbsp;Angebotsbilder&nbsp;hochladen&nbsp;(max.&nbsp;{{ max_num_images }})</a>
                          <input type="file" name="upl" multiple=""/>
                      </div>
                      <ul id="img-list">
                            {% for eimg in images %}<li class="thumb">
                                    <a href="{{ eimg.image.urlPath(image_url_prefix) }}" title="öffnen" target="_blank"><img src="{{ eimg.image.thumbnailUrlPath(image_url_prefix) }}" alt="öffnen"/></a>
                                    <br/>
                                    <a class="remove" href="#" data-id="{{ eimg.image.id }}" title="löschen"><img src="/img/icons/delete.png" alt="löschen" /></a>
                                </li>{% endfor %}
                      </ul>
                  </form>
                  <p class="how-many">Quer- oder Hochformat / min. 650 px Breite / max. {{ megabytes }} MB / JPG oder PNG / Keine Werbefotos</p>
                  
                  {% if imagesValidation %}
                         <br />
                      <div class="err-msg"><ul><li>{{ imagesValidation }}</li></ul></div>
                  {% endif %}
                  
              </div>

            {{ form_start(form) }}
              <div class="row">
                  <div class="col-xs-12 border-bottom-white form-head describe">
                      <div class="form-container border-bottom-white">
                          <div class="row">
                              <div class="col-sm-12">
                                  <p class="form-heading-small margin-none">
                                      Beschreibe dein Angebot*
                                      (Anmerkung: Persönliche Kontaktdaten, Nachnamen, Firmennamen oder Web-Links werden automatisch entfernt.)
                                  </p>
                                  <div class="err-msg">{{ form_errors(form) }}</div>
                              </div>
                          </div>
                      </div>
                      <div class="form-container form-input-border padding-30">
                          <div class="row">
                              <div class="col-sm-12">
                                  {# <textarea placeholder="Maximal 500 Zeichen verfügbar"></textarea> #}
                                  {{ form_widget(form.description) }}
                                  <div class="err-msg">{{ form_errors(form.description) }}</div>
                                  <div class="chbox-holder">
                                      {# <input type="checkbox" id="c2hx"> #}
                                      {{ form_widget(form.make_sure) }}
                                      <label for="form_make_sure"><span></span>Bitte versichere, dass du aktuelle Originalfotos verwendest und dein Equipment zum Zeitpunkt der Buchung funktionstüchtig und
      einsatzbereit ist.*</label>
                                  </div>
                                  <div class="err-msg">{{ form_errors(form.make_sure) }}</div>
                              </div>
                          </div>
                      </div>
                      <div class="form-container border-bottom-white margin-ort">
                          <div class="row ort">
                              <div class="col-sm-12">
                                  <p class="form-heading-small margin-none">Übergabeort* (Die genaue Adresse wird erst nach einer Buchung bekanntgegeben)</p>
                              </div>
                          </div>
                      </div>
                      <div class="form-container form-input-border padding-30">
                          <div class="row ort">
                              <div class="col-sm-12">
                                  <div class="row">
                                    <div class="col-xs-6">
                                        {{ form_widget(form.street, { 'attr': { 'placeholder': 'Strasse*' } }) }}
                                        <div class="err-msg">{{ form_errors(form.street, { 'attr': { 'class': 'err-msg' } }) }}</div>
                                    </div>
                                    <div class="col-xs-3">
                                        {{ form_widget(form.number, { 'attr': { 'placeholder': 'Hausnr.*', 'class': 'security' } }) }}
                                        <div class="err-msg">{{ form_errors(form.number, { 'attr': { 'class': 'err-msg' } }) }}</div>
                                    </div>
                                    <div class="col-xs-3">
                                        {{ form_widget(form.flatNumber, { 'attr': { 'placeholder': 'Türnr.', 'class': 'security' } }) }}
                                        <div class="err-msg">{{ form_errors(form.flatNumber, { 'attr': { 'class': 'err-msg' } }) }}</div>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div class="col-xs-3">
                                        {{ form_widget(form.postcode, { 'attr': { 'placeholder': 'PLZ*' } }) }}
                                        <div class="err-msg">{{ form_errors(form.postcode, { 'attr': { 'class': 'err-msg' } }) }}</div>
                                    </div>
                                    <div class="col-xs-5">
                                        {{ form_widget(form.place, { 'attr': { 'placeholder': 'Ort*' } }) }}
                                        <div class="err-msg">{{ form_errors(form.place, { 'attr': { 'class': 'err-msg' } }) }}</div>
                                    </div>
                                  </div>
                                <div class="chbox-holder">
                                    {{ form_widget(form.defaultAddress) }}
                                    <label for="form_defaultAddress"><span></span>Als Standardadresse für weitere Angebote speichern</label>
                                </div>
                              </div>
                          </div>
                      </div>
                      <div class="form-container border-bottom-white margin-ort">
              <div class="row">
                <div class="col-sm-12">
                  <p>Telefon Nr. für Rückfragen*</p>
                </div>
              </div>
            </div>
            <div class="form-container form-input-border">
              <div class="row">
                <div class="phone-inputs"> <span>+43</span>
                  {{ form_widget(form.phonePrefix, { 'attr': { 'placeholder': '000' } }) }}
                  {{ form_widget(form.phone, { 'attr': { 'placeholder': '1234567', 'class': 'security' } }) }}
                  <div class="err-msg">{{ form_errors(form.phonePrefix, { 'attr': { 'class': 'err-msg' } }) }}</div>
                  <div class="err-msg">{{ form_errors(form.phone, { 'attr': { 'class': 'err-msg' } }) }}</div>
                </div>
              </div>
          </div>  
                      <div class="chbox-holder alone-chbox">
                          {# <input type="checkbox" id="c2hxx"> #}
                          {{ form_widget(form.accept) }}
                          <label for="form_accept"><span></span>
                              Ich habe die <a href="{{ path('kundeninfos_agb') }}" target="_blank">AGB</a> gelesen und stimme diesen zu.*
                          </label>
                      </div>
                      <div class="err-msg">{{ form_errors(form.accept) }}</div>
                      <input type="submit" class="yellow-button user-submit" value="Beschreibung speichern &gt;&gt;">
                  </div>
              </div>
            {{ form_end(form) }}
          </div>
          <div class="col-xs-4">
              <div class="support portfolios">
                  <p class="head">Deine Angebotsfotos</p>
                  <p class="text-bold">Ein tolles Foto zu deiner Anzeige ver-
                      bessert die Chancen, dass dein Angebot
                      gebucht wird um ein Vielfaches!</p>
                  <p>
                      In unserem 
                      <a href="{{ path("tutorial-photo") }}" target="_blank">Foto-Tutorial</a> 
                      findest du ein paar nützliche Tipps.
                  </p>
                  <div id="owl-demo" class="owl-carousel user-owl">
                      <div class="item">
                          <img src="/img/allgemein-final/form_e_1.jpg" alt=""/>                    </div>
                      <div class="item">
                          <img src="/img/allgemein-final/form_e_2.jpg" alt=""/>                    </div>
                      <div class="item">
                          <img src="/img/allgemein-final/form_e_3.jpg" alt=""/>                    </div>
                  </div>
              </div>
          </div>
          <div class="col-xs-4">
          </div>
      </div>
  </section>
  <!-- Modal -->
  <div id="allgemeine-modal" class="modal fade allgemeine register" role="dialog">
      <div class="modal-dialog">
          <!-- Modal content-->
          <div class="modal-content">
              <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal"><img src="/img/close-modal.png" alt="close"/></button>
                  <h4 class="modal-title">Allgemeine Geschäftsbedingungen</h4>
                  <h5>Headline 1</h5>
                  <p>
                    Ommodolo rperaesto consed dolore conse ex ex exerciduis at. Duipisl ilis acidunt inci exeriusto core dolummod eu feugait at wisisci bla consenibh enibh et ad tet autpate velesto coreetum nullumsandio odit nullaorem num volore tincip erostrud dolore magnis atum quissed eugiam, sis nisit nullaorpero duis nim nit nonseni ssismolesto commy nullum nos adio odolorem iriusto ex esto diatet alisim ipisl il doluptate tat, corpero ex elenibh ea facidunt lummolor am inim nim ing eriliquat.
                  </p>
                  <h5>Headline 2</h5>
                  <p>
                      Ommodolo rperaesto consed dolore conse ex ex exerciduis at. Duipisl ilis acidunt inci exeriusto core dolummod eu feugait at wisisci bla consenibh enibh et ad tet autpate velesto coreetum nullumsandio odit nullaorem num volore tincip erostrud dolore magnis atum quissed eugiam, sis nisit nullaorpero duis nim nit nonseni ssismolesto commy nullum nos adio odolorem iriusto ex esto diatet alisim ipisl il doluptate tat, corpero ex elenibh ea facidunt lummolor am inim nim ing eriliquat.
                  </p>
              </div>
          </div>
    </div>
  </div>
  <div id="allge-modal" class="modal fade allge register" role="dialog">
      <div class="modal-dialog">
          <!-- Modal content-->
          <div class="modal-content">
              <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal"><img src="/img/close-modal.png" alt="close"/></button>
                  <h4 class="modal-title reg vielen">Vielen Dank!</h4>
                  <p class="anggl">
                    und herzlich willkommen bei der <br />
                    hey! sharing community!<br /><br />

                    Wir haben dir gerade eine Email <br />
                    mit einem Bestätigunslink geschickt.<br /><br />

                    <strong>Bitte rufe deine Emails ab um<br />
                    die Registrierung abzuschließen!</strong>
                  </p>
                  <p class="anggl-small">
                    Falls die Email nicht in deinem Postfach liegt überprüfe bitte  auch deinen Spam-Ordner.<br /><br />

                    Falls du die Email dennoch nicht erhalten hast, lasse sie dir  erneut senden oder kontaktiere uns<br />
                  </p>
              </div>
          </div>
      </div>
  </div>
  <div id="cropper-modal" class="modal fade">
      <div class="modal-dialog">
          <div class="modal-content" >
              <div class="modal-header" style="height: 50px;">
                <button type="button" class="close" data-dismiss="modal"><img src="/img/close-modal.png" alt="close"/></button>
              </div>
              <div class="modal-body">
                  <div class="image" style="width: 600px; height: 400px; overflow: hidden;">
                  </div>
              </div>
              <div class="modal-footer">
                  <button class="save button-black backgound-yellow text-black">save</button>
              </div>
            </div>
      </div>
  </div>
    <div id="edit-offer" class="modal fade delete-offer" role="dialog">
      <div class="modal-dialog"> 
        <!-- Modal content-->
        <div class="modal-content">
          <button type="button" class="close" data-dismiss="modal"><img src="/img/close-modal.png" alt="close"/></button>
          <div class="content-modal">
            <p class="text-bold">Das Angebot wurde bearbeitet.</p>
            <p class="delate-info">Bitte beachte, dass dein Angebot erst von uns angesehen werden muss, bevor die Änderungen aktiv werden.</p>
        </div>
      </div>
    </div>
{% endblock %}

{% block script %}
  <script src="/js/vendors/upload/jquery.knob.js"></script>
  <script src="/js/vendors/upload/jquery.ui.widget.js"></script>
  <script src="/js/vendors/upload/jquery.iframe-transport.js"></script>
  <script src="/js/vendors/upload/jquery.fileupload.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-jcrop/0.9.12/js/jquery.color.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-jcrop/0.9.12/js/jquery.Jcrop.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-jcrop/0.9.12/css/jquery.Jcrop.min.css"/>
  
    <script>
        
        var fieldsChanged = false;
      
      var url1 = "{{ path('equipment-edit-1', {'id': id} ) }}"
      var url3 = "{{ path('equipment-edit-3', {'eqid': id}) }}";
      var url4 = "{{ path('equipment-edit-4', {'id': id}) }}";
      
      function topMenuClick(){
          
          if (!fieldsChanged || confirm('Sie haben ungesicherte Änderungen. Möchtest du fortfahren?')){
              switch($(this).attr("id").split("_")[1]){
                  case "1":
                      location.href = url1;
                      break;
                  case "3":
                      location.href = url3;
                      break;
                  case "4":
                      location.href = url4;
                      break;
              }
              
          } 
      }
        
        var jcropApi = null;
        
        function showCoords(c) {
            console.log(Math.round(c.x) + ', ' + Math.round(c.y) + ', ' + Math.round(c.x2) + ', ' + Math.round(c.y2) + ', ' + Math.round(c.w) + ', ' + Math.round(c.h));
        }
        
        function deleteImage(e) {
            e.preventDefault();
            
            var $this = $(this);
            var iid = $this.data('id');
            var url = '{{ path('equipment-image-delete', { 'eid': 'EID', 'iid': 'IID' }) }}'.replace('EID', '{{ equipment.id }}').replace('IID', iid);
            $.getJSON(url)
                    .done(function(data) {
                        $this.parents('li.thumb').remove();
                    })
                    .fail(function() {
                        alert('Fehler beim Entfernen des Bildes. Bitte versuche es erneut.');
                    })
                    .always(function() {
                        refreshCtrl();
                    });
        }
        function refreshCtrl() {
            if ($("#upload ul li").length >= {{ max_num_images }}) {
                $("#drop").addClass('disabled');
            }
            else {
                $("#drop").removeClass('disabled');
            }
            if ($("#upload-main ul li").length >= 1) {
                $("#drop-main").addClass('disabled');
            }
            else {
                $("#drop-main").removeClass('disabled');
            }
        }
        function setupJcrop() {
            var $img = $("#cropper-modal .modal-body img");
            var main = true;//$img.data('main');
            var params = {
                //onSelect: showCoords,
                //onChange: showCoords,
                boxWidth: 600,
                boxHeight: 400,
                keySupport: false,
                minSize: [750, 0],
                setSelect: [0, 0, 750, 563]
            };
            if (main) {
                params['aspectRatio'] = 4.0 / 3.0;
                params['minSize'] = [750, 563];
            }   
            
            
            $img.Jcrop(params, function() {
                jcropApi = this;
            });
            $("#img-list li.process, #img-list-main li.process").remove();
            $("#cropper-modal").modal({ 
                'backdrop': 'static' 
            });
        }
        
        $(function() {
            {% if statusChanged %}
                $("#edit-offer").modal();
                $("#edit-offer").on("hidden.bs.modal", function() {
                    window.location = '{{ path('equipment-edit-3', { 'eqid': id }) }}';
                });
            {% endif %}
            
            $("form input[type='text']").on("change", function(){
                fieldsChanged = true;
            });
            $("form textarea").on("change", function(){
                fieldsChanged = true;
            });
            $(".top-menu-button").click(topMenuClick);
            
            var ul = $('#upload ul');
            refreshCtrl();
        
            $("li.thumb a.remove").click(deleteImage);
            
            $('#drop a').click(function(){
                if ($("#upload ul li").length >= {{ max_num_images }})
                    return;
                // Simulate a click on the file input button
                // to show the file browser dialog
                $(this).parent().find('input').click();
            });
            $('#drop-main a').click(function(){
                if ($("#upload-main ul li").length >= 1)
                    return;
                // Simulate a click on the file input button
                // to show the file browser dialog
                $(this).parent().find('input').click();
            });
            
            $("#cropper-modal .save").click(function() {
                var $img = $("#cropper-modal .modal-body img");
                var rect = jcropApi.tellSelect();
                var name = $img.data('name');
                var main = $img.data('main');
                var url = '{{ path('equipment-main-image-save') }}';
                var params = {
                    'name': name,
                    'x': Math.round(rect.x),
                    'x2': Math.round(rect.x2),
                    'y': Math.round(rect.y),
                    'y2': Math.round(rect.y2),
                    'id': {{ equipment.id }},
                    'main': main
                };
                $.getJSON(url, params)
                    .done(function(data) {
                        $("#cropper-modal").modal('hide');
                        
                        var url = data.url;
                        var imgId = data.imgId;
                        var main = data.main;
                        var tmpl = '<li class="thumb">' + 
                                    '<a href="' + url + '" target="_blank" title="öffnen"><img src="' + url + '" alt="öffnen"/></a>' +
                                    '<br/>' +
                                    '<a href="#" class="remove" data-id="' + imgId + '" title="löschen"><img src="/img/icons/delete.png" alt="löschen"/></a>' +
                                    '</li>';
                        
                        var $html = $(tmpl);
                        if (main)
                            $("#upload-main ul").append($html);
                        else
                            $("#upload ul").append($html);
                        $html.find("a.remove").click(deleteImage);
                    })
                    .fail(function(data) {
                        alert('Bildverarbeitung fehlgeschlagen. Bitte versuche es erneut.');
                    })
                    .always(function() {
                        refreshCtrl();
                    });
            });

            $('#upload-main').fileupload({

                // This element will accept file drag/drop uploading
                dropZone: $('#drop-main'),

                // This function is called when a file is added to the queue;
                // either via the browse button, or via drag/drop:
                add: function (e, data) {
                    var tmpl = '<li class="thumb process"><div class="gauge"><input class="knob" type="text" value=""/></div><div class="status">0%</div></li>';
                    var $html = $(tmpl);
                    $(this).find("ul").append($html);
                    data.context = $html;
                    $html.find('input').knob({
                        width: 48,
                        height: 48,
                        inputColor: '#000',
                        displayInput: false,
                        min: 0,
                        max: 100,
                        readOnly: true
                    });
                    
                    // Automatically upload the file once it is added to the queue
                    var jqXHR = data.submit();
                },

                progress: function(e, data){

                    // Calculate the completion percentage of the upload
                    var progress = parseInt(data.loaded / data.total * 100, 10);

                    // Update the hidden input field and trigger a change
                    // so that the jQuery knob plugin knows to update the dial
                    data.context.find('input').val(progress).change();
                    data.context.find('.status').text(progress + '%');

                    if (progress == 100)
                        data.context.find('.status').text('Verarbeitung...');
                },

                done: function(e, data) {
                    var url = data.result.url;
                    var name = data.result.name;
                    var w = data.result.width;
                    var h = data.result.height;
                    var main = true;
                    
                    
                    var $img = $("<img>").one('load', setupJcrop).attr('src', url).data('name', name).data('main', main);
                    $("#cropper-modal .image").empty();
                    $("#cropper-modal .image").append($img);
                    //$("#cropper-modal").modal();
                                        
                    data.context.find('.status').text('Verarbeitung...');
                },

                fail:function(e, data){
                    // Something has gone wrong!
                    alert(data.jqXHR.responseJSON.message);
                    // remove progress li
                    $("#img-list li.process, #img-list-main li.process").remove();
                }

            });
            $('#upload').fileupload({

                // This element will accept file drag/drop uploading
                dropZone: $('#drop'),

                // This function is called when a file is added to the queue;
                // either via the browse button, or via drag/drop:
                add: function (e, data) {
                    var tmpl = '<li class="thumb process"><div class="gauge"><input class="knob" type="text" value=""/></div><div class="status">0%</div></li>';
                    var $html = $(tmpl);
                    $(this).find("ul").append($html);
                    data.context = $html;
                    $html.find('input').knob({
                        width: 48,
                        height: 48,
                        inputColor: '#000',
                        displayInput: false,
                        min: 0,
                        max: 100,
                        readOnly: true
                    });
                    
                    // Automatically upload the file once it is added to the queue
                    var jqXHR = data.submit();
                },

                progress: function(e, data){

                    // Calculate the completion percentage of the upload
                    var progress = parseInt(data.loaded / data.total * 100, 10);

                    // Update the hidden input field and trigger a change
                    // so that the jQuery knob plugin knows to update the dial
                    data.context.find('input').val(progress).change();
                    data.context.find('.status').text(progress + '%');

                    if (progress == 100)
                        data.context.find('.status').text('Verarbeitung...');
                },

                done: function(e, data) {
                    var url = data.result.url;
                    var thumbUrl = data.result.thumbUrl;
                    var imgId = data.result.imgId;
                    var tmpl = '<li class="thumb">' + 
                                '<a href="' + url + '" target="_blank" title="öffnen"><img src="' + thumbUrl + '" alt="öffnen"/></a>' +
                                '<br/>' +
                                '<a href="#" class="remove" data-id="' + imgId + '" title="löschen"><img src="/img/icons/delete.png" alt="löschen"/></a>' +
                                '</li>';
                    var $html = $(tmpl);
                    
                    data.context.remove();

                    $("#upload ul").append($html);
                    $html.find("a.remove").click(deleteImage);
                    refreshCtrl();
                },

                fail:function(e, data){
                    // Something has gone wrong!
                    if (data.jqXHR.hasOwnProperty('responseJSON'))
                        alert(data.jqXHR.responseJSON.message);
                    else 
                        alert('Es gab einen Fehler beim Hochladen der Bilder. Bitte versuch es noch einmal.');
                    // remove progress li
                    data.context.remove();
                }

            });

            // Prevent the default action when a file is dropped on the window
            $(document).on('drop dragover', function (e) {
                e.preventDefault();
            });
        });
    </script>
{% endblock %}
